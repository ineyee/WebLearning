<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    function getRequest() {
      const promise = new Promise((resolve, reject) => {
        // 前面我们举得例子中耗时操作本身都不是一个Promise
        // 耗时操作本身————要么是在当前异步任务函数里setTimeout延时几秒后就能得到耗时操作的结果，要么是在别的监听函数里不知道等多久能得到耗时操作的结果
        // 但如果耗时操作本身就是个Promise且能在当前异步任务函数里等待一段时间后就能得到耗时操作的结果，代码该怎么写呢？
        //
        // get请求是个耗时操作，且get请求这个耗时操作本身就返回一个Promise
        // 于是我们就能通过耗时操作这个Promise的then监听到它执行成功和失败的时机，来分别调用resolve和reject了
        fetch("https://www.baidu.com", {
          mode: 'no-cors', // 设置为 no-cors
        }).then(
          (value) => {
            resolve(value);
          }, (error) => {
            reject(error);
          },
        );
      });

      return promise;
    }

    getRequest().then(
      (value) => {
        console.log(`get请求成功：${value}`);
      }, (error) => {
        console.log(`get请求失败：${error}`);
      },
    );
  </script>
</body>

</html>