## 一、打包
* cd到项目根目录
* 执行“npm run build”命令即可，webpack就会给我们把项目打包在根目录下的dist文件夹里了，当然我们可以把dist改成我们项目的名字（手动修改或者webpack打包配置修改都行）

## 二、部署

#### 1、购买云服务器（这里以阿里云为例）

###### 1.1 注册阿里云账号
在阿里云官网注册即可，https://aliyun.com/

###### 1.2 购买云服务器
* 阿里云首页
* 控制台
* 搜索云服务器ECS，点进去
* 创建实例（一个实例对应一个服务器）
  * 基础配置
    * 付费模式：长期使用选包年包月，学习练习选按量付费
    * 地域及可用区：阿里的服务器放在很多不同的地方，我们要选择离用户近的那个地方以便用户访问起来更快
    * 实例规格：服务器的核数和内存要多少，按自己的需求选择相应性能的规格
    * 镜像操作系统：服务器一般安装的都是Linux操作系统，公司里我们一般选择的是Linux操作系统的CentOS版本
    * 存储：服务器的硬盘要多大，按自己的需求选择相应的存储容量
  * 网络和安全组：选择默认的或之前的安全组或新建一个安全组都行，主要决定了哪些端口号可以被访问，比如安全组要添加上80端口和443端口，因为http请求默认是80端口，https请求默认是443端口，所以我们要添加上这两个端口，这样我们的服务器才能被外网访问，又比如MySQL数据库默认的端口是3306端口，所以我们也要添加上这个端口，否则我们的数据库也不能被外网访问
  * 密钥对或密码：选择自定义密码，输入密码，就是root这个用户的密码，将来我们可以通过这个账号和密码来访问服务器
  
#### 2、配置云服务器，给服务器安装node和mysql

###### 2.1 先把我们的电脑连接到服务器
* 阿里云的实例（即服务器）详情页面里有个“远程连接”，点击它即可连接上服务器

###### 2.2 在阿里云给我们打开的终端里给服务器安装node和mysql
* 执行“dnf install nodejs”命令安装nodejs
* 可以通过“node -v”或“node --version”来查看所安装nodejs的版本
* 执行“dnf install mysql-server”命令安装mysql
* 可以通过“mysql -V”或“mysql --version”来查看所安装mysql的版本

###### 2.3 在阿里云给我们打开的终端里启动mysql
* 执行“systemctl start mysqld”命令来启动mysql
* 然后我们可以执行”systemctl status mysqld“命令来查看mysql的运行状态是否成功启动，如果看到active(running)就代表启动成功了
* 此外我们还可以执行”systemctl enable mysqld“命令来让服务器重启时自动启动mysql，免得每次重启系统还得我们主动执行命令来启动mysql

###### 2.4 在阿里云给我们打开的终端里配置mysql
执行“mysql_secure_installation”命令来配置mysql
* 选择 yes 来开是配置
* 选择给数据库设置强密码
* 设置数据库的密码，记下这个密码，将来我们在代码里连接数据库时要用到
* 选择 yes 来确认使用此密码
* 然后会让我们选择是否删除匿名用户，我们选择Y
* 然后会让我们选择是否禁止root用户远程登录，我们选择N
* 然后会让我们选择是否删除test数据库，我们选择Y
* 然后会让我们选择是否刷新权限表，我们选择Y

###### 2.5 在阿里云给我们打开的终端里修改数据库 root 用户的访问权限
* 执行“mysql -u root -p”命令来登录数据库，回车后会提示我们输入密码，输入前面我们给数据库设置的密码即可
* 登录成功后，执行“use mysql;”命令来切换到mysql数据库
* 执行“select host, user from user;”命令来查看当前数据库的用户列表，默认如下：
```
+-----------+------------------+
| host      | user             |
+-----------+------------------+
| localhost | mysql.infoschema |
| localhost | mysql.session    |
| localhost | mysql.sys        |
| localhost | root             |
+-----------+------------------+
```
* 可以看到有一行记录是这样的：“localhost root”，这代表root用户只能在当前服务器上来访问数据库，无法通过其它主机访问数据库，可是我们需要各个开发者通过他们电脑上Navicat来访问数据库，所以得把把“localhost”改成“%”（通配符），这样root用户可以从任意主机登录了
* 执行“update user set host='%' where user='root';”命令来修改root用户的访问权限 
* 再次执行“select host, user from user;”命令来再次查看用户列表，发现已经更新成功：
```
+-----------+------------------+
| host      | user             |
+-----------+------------------+
| localhost | mysql.infoschema |
| localhost | mysql.session    |
| localhost | mysql.sys        |
| %         | root             |
+-----------+------------------+
```
* 执行“flush privileges;”命令来刷新权限表，这样修改才会生效
* 执行“exit;”命令来退出数据库

#### 3、在 Navicat GUI 工具里连接服务器上的数据库
* 首先得确保网络和安全组里添加了3306端口，否则连接不上
* 其次得做好2.5 root用户的访问权限，否则连接不了
* 然后就可以去Navicat里连接服务器上的数据库了
  * 新建一个连接
  * 连接的类型选择为 MySQL
  * 输入连接的名字，如ali_mysql
  * 输入域名和端口号，如118.25.70.197、3306
  * 输入账号和密码，root、前面我们设置的数据库密码
  * 确定后连接就创建好了，此时连接是灰色，代表连接尚未启动
  * 双击这个连接就可以启动了，此时连接会变成绿色，这个连接下所有的数据库也会被展示出来
* 这样我们就可以在Navicat里操作服务器上的数据库了，比如创建表、查看表里的数据等等

#### 4、在 Navicat GUI 工具里做数据库迁移
比如项目刚开始我们的数据库是创建在自己电脑上的一个数据库，现在项目开发完了，本地数据库里已经有各种表结构及关连了，当然也有一些测试数据，现在要把本地这个数据库迁移到服务器上的数据库里，这件事情其实很简单，Navicat GUI 工具就可以帮我们完成
* 选中本地的数据库
* 右键选中“转储 SQL 文件”，选择“结构和数据”（表结构和测试数据）或“仅结构”（仅表结构），开始转储，等待下载完成
* 在远程服务器上创建一个跟本地同名的数据库
* 然后直接把下载好的 SQL 文件直接拖到远程数据库里，根据提示运行一下即可，这样一来，服务器上的数据库就跟本地的一模一样了

#### 5、把我们的项目部署到服务器

###### 5.1 手动部署
* VSCode里安装”Remote -SSH“插件（也可以直接在阿里云的那个连接远程里做，那个里面也能打开文件夹）
* 左侧侧边栏选中该插件
* SSH右侧选择新建远程
* 在弹窗里输入“ssh root@服务器的公网IP”，回车来新建远程
* 选择“/User/xxx/.ssh/config”配置文件
* 左侧SSH下就有我们的远程服务器了
* 选中远程服务器，右键连接，输入root用户的密码即可发起连接
* 连接成功后，我们去选中窗口的文件夹那一栏，发现里面会提示“已连接到远程”
* 然后我们选择“打开文件夹”来打开远程服务器上的文件夹，默认会帮我们打开远程服务器的root文件夹，这样远程服务器的root文件夹就展示在VSCode里了
* 我们可以在root文件夹下创建一个文件夹“my_project”，将来我们的项目就都放在这个文件夹下
* 把我们打包好的项目文件夹直接拖进“my_project”文件夹里就可以了
* 去你的浏览器里访问一下你的项目吧：http://47.96.144.164
