## 一、数据库是什么

任何软件系统都需要存储大量的数据，比如用户信息（姓名、性别、年龄、地址）、商品信息（商品名称、商品价格、商品描述、商品宣传图）等，而数据库就是用来存储数据的，它有如下特点：

* ​结构化组织：数据以表格（关系型）或文档（非关系型）等形式组织
* ​持久化存储：数据可以长期保存在存储介质中，断电不丢失
* ​高效操作：提供增删改查等操作来快速处理数据
* ​安全访问：提供数据保护机制来支持多用户并发访问同一数据

## 二、为什么需要数据库

如果没有数据库，那大量的数据就得存储在文件里，但是文件系统有很多缺点：

* 很难以合适的方式来组织数据，比如用户信息存储到一个文件里，商品信息存储到一个文件里，但是这两个文件里的信息有一定的关联，是不太好关联的
* 当文件较小时，对文件进行整体的增删改查操作可能还好，但是当文件大起来后，我们如果想对文件里数据的某一小部分数据进行修改、删除之类的操作是不行的
* 文件系统的话，发生并发访问时可能会发生阻塞或覆盖，数据不安全
* ......

## 三、关系型数据库和非关系型数据库

#### 1、关系型数据库

代表产品：MySQL、Oracle 等

特点：
* 结构化组织：每条数据都存储在以行和列组成的二维表里，表与表之间又可以通过外键来关联形成一对一、一对多、多对多的关系
* SQL 操作：使用标准 SQL 语句来对数据进行增删改查操作

举例：以存储用户信息 + 商品信息为例，通常需要拆分成多个表，通过外键来关联

**用户表（Users）**
|user_id（主键）|name|sex|age|address|
|:-:|:-:|:-:|:-:|:-:|
|1001|张三|男|18|杭州市上城区|
|1002|李四|女|19|杭州市拱墅区|


**商品表（Goods）**
|goods_id（主键）|user_id（外键）|name|price|desc|picture|
|:-:|:-:|:-:|:-:|:-:|:-:|
|10001|1001|手机|5000|很好用的手机|https://xxx.jpg|
|10002|1002|电脑|8000|很好用的电脑|https://xxx.jpg|

#### 2、非关系型数据库

代表产品：MongoDB、Redis 等

特点：
* 数据以 JSON 等形式直接存储在文档里
* 相较非关系型数据库，存取数据更加简单高效，但是数据可能会出现重复存储

举例：以存储用户信息 + 商品信息为例，我们为每个用户创建一个文档

```json
// 用户一的文档（直接嵌入订单信息）
{
  "user_id": 1001,
  "name": "张三",
  "sex": "男",
  "age":  18,
  "address": "杭州市上城区",
  "goods": [
    {
      "goods_id": 10001,
      "name": "手机",
      "price": 5000,
      "desc": "很好用的手机",
      "picture": "https://xxx.jpg"
    }
  ]
}
```

```json
// 用户二的文档（直接嵌入订单信息）
{
  "user_id": 1002,
  "name": "李四",
  "sex": "女",
  "age":  18,
  "address": "杭州市拱墅区",
  "goods": [
    {
      "goods_id": 10002,
      "name": "电脑",
      "price": 8000,
      "desc": "很好用的电脑",
      "picture": "https://xxx.jpg"
    }
  ]
}
```

> 这里需要注意：
>
> 非关系型数据库的文档和文件存储在形式上看起来几乎一样，但它们的底层实现完全不同，数据库就是数据库，文件存储就是文件存储
>
> 比如非关系型数据库提供了专门的 CRUD API 来完成文档里数据的增删改查操作，而文件存储则需要我们自己手动读写文件等；又比如非关系型数据库给我们提供了专门的锁机制来避免并发访问时的数据冲突问题，而文件存储发生并发访问时可能会发生阻塞或覆盖

#### 3、选择

* 目前在公司进行后端开发（Node、Java、Go 等），还是以关系型数据库为主
* 比较常用到非关系型数据库的场景，就是爬取大量数据后进行存储时，直接把数据塞进非关系型数据库里，就不用再建表、搞什么表关联了

