// éœ€è¦é¦–å…ˆçŸ¥é“çš„æ˜¯ï¼Œexpress æ¡†æ¶ä¼šè‡ªåŠ¨å¤„ç† http åè®®çš„æ ‡å‡†é”™è¯¯ï¼Œæ¯”å¦‚ 404ã€500 ç­‰
// ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æœåŠ¡ç«¯å¼€å‘è€…ä¸éœ€è¦å…³å¿ƒä¸‡ä¸€å®¢æˆ·ç«¯è¯·æ±‚äº†ä¸€ä¸ªæœåŠ¡å™¨ä¸Šæ ¹æœ¬ä¸å­˜åœ¨çš„è·¯å¾„æ—¶å’‹åŠï¼Œå› ä¸ºæ¡†æ¶ä¼šè‡ªåŠ¨è¿”å› 404 é”™è¯¯ç»™å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¼–å†™ä»»ä½•ä»£ç 
// å› æ­¤è¿™å°±æ„å‘³ç€æˆ‘ä»¬æœåŠ¡ç«¯å¼€å‘è€…åªéœ€è¦å…³å¿ƒä¸šåŠ¡é€»è¾‘çš„é”™è¯¯ï¼Œæ¯”å¦‚ token æ ¡éªŒå‡ºé”™ã€ç”¨æˆ·åæˆ–å¯†ç å‡ºé”™ç­‰ï¼Œè¿™äº›ä¸šåŠ¡é€»è¾‘çš„é”™è¯¯éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™ä»£ç è¿”å›é”™è¯¯ä¿¡æ¯ç»™å®¢æˆ·ç«¯

const express = require('express');
const errorHandler = require("./error_handler");

const app = express();
app.listen(8000, () => {
    console.log("ğŸš€æœåŠ¡å™¨å¯åŠ¨æˆåŠŸğŸš€")
});
app.use(express.json());

app.post("/login2", (req, res, next) => {
  if (req.headers.token !== "qwertyuiop") {
    next(1001);
  } else {
    if ((req.body.username === "admin" && req.body.password === "123456") == false) {
      next(1002);
    } else {
      // æˆåŠŸçš„è¯ï¼Œè¿”å›çš„æ•°æ®è‚¯å®šæ˜¯è·Ÿå½“å‰æ¨¡å—ç´§å¯†ç›¸å…³çš„ï¼Œæ‰€ä»¥å°±ä¸ç”¨æŠ½å–åˆ°å¤–é¢å»äº†ï¼Œç›´æ¥åœ¨å½“å‰æ¨¡å—å†…éƒ¨è¿”å›
      res.json({
        "code": 0,
        "message": "ç™»å½•æˆåŠŸ",
      });
    }
  }
});

// ä½¿ç”¨é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ—¶ï¼Œå¿…é¡»æ³¨å†Œåœ¨æ‰€æœ‰å…¶å®ƒä¸­é—´ä»¶ä¹‹å
app.use(errorHandler);

