## ä¸€ã€æ‰“åŒ…
* cdåˆ°é¡¹ç›®æ ¹ç›®å½•
* æ‰§è¡Œâ€œnpm run buildâ€å‘½ä»¤å³å¯ï¼Œwebpackå°±ä¼šç»™æˆ‘ä»¬æŠŠé¡¹ç›®æ‰“åŒ…åœ¨æ ¹ç›®å½•ä¸‹çš„distæ–‡ä»¶å¤¹é‡Œäº†ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥æŠŠdistæ”¹æˆæˆ‘ä»¬é¡¹ç›®çš„åå­—ï¼ˆæ‰‹åŠ¨ä¿®æ”¹æˆ–è€…webpackæ‰“åŒ…é…ç½®ä¿®æ”¹éƒ½è¡Œï¼‰

## äºŒã€éƒ¨ç½²

#### 1ã€è´­ä¹°äº‘æœåŠ¡å™¨ï¼ˆè¿™é‡Œä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼‰

###### 1.1 æ³¨å†Œé˜¿é‡Œäº‘è´¦å·
åœ¨é˜¿é‡Œäº‘å®˜ç½‘æ³¨å†Œå³å¯ï¼Œhttps://aliyun.com/

###### 1.2 è´­ä¹°äº‘æœåŠ¡å™¨
* é˜¿é‡Œäº‘é¦–é¡µ
* æ§åˆ¶å°
* æœç´¢äº‘æœåŠ¡å™¨ECSï¼Œç‚¹è¿›å»
* åˆ›å»ºå®ä¾‹ï¼ˆä¸€ä¸ªå®ä¾‹å¯¹åº”ä¸€ä¸ªæœåŠ¡å™¨ï¼‰
  * åŸºç¡€é…ç½®
    * ä»˜è´¹æ¨¡å¼ï¼šé•¿æœŸä½¿ç”¨é€‰åŒ…å¹´åŒ…æœˆï¼Œå­¦ä¹ ç»ƒä¹ é€‰æŒ‰é‡ä»˜è´¹
    * åœ°åŸŸåŠå¯ç”¨åŒºï¼šé˜¿é‡Œçš„æœåŠ¡å™¨æ”¾åœ¨å¾ˆå¤šä¸åŒçš„åœ°æ–¹ï¼Œæˆ‘ä»¬è¦é€‰æ‹©ç¦»ç”¨æˆ·è¿‘çš„é‚£ä¸ªåœ°æ–¹ä»¥ä¾¿ç”¨æˆ·è®¿é—®èµ·æ¥æ›´å¿«
    * å®ä¾‹è§„æ ¼ï¼šæœåŠ¡å™¨çš„æ ¸æ•°å’Œå†…å­˜è¦å¤šå°‘ï¼ŒæŒ‰è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ç›¸åº”æ€§èƒ½çš„è§„æ ¼
    * é•œåƒæ“ä½œç³»ç»Ÿï¼šæœåŠ¡å™¨ä¸€èˆ¬å®‰è£…çš„éƒ½æ˜¯Linuxæ“ä½œç³»ç»Ÿï¼Œå…¬å¸é‡Œæˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©çš„æ˜¯Linuxæ“ä½œç³»ç»Ÿçš„CentOSç‰ˆæœ¬
    * å­˜å‚¨ï¼šæœåŠ¡å™¨çš„ç¡¬ç›˜è¦å¤šå¤§ï¼ŒæŒ‰è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ç›¸åº”çš„å­˜å‚¨å®¹é‡
  * ç½‘ç»œå’Œå®‰å…¨ç»„ï¼šé€‰æ‹©é»˜è®¤çš„æˆ–ä¹‹å‰çš„å®‰å…¨ç»„æˆ–æ–°å»ºä¸€ä¸ªå®‰å…¨ç»„éƒ½è¡Œï¼Œä¸»è¦å†³å®šäº†å“ªäº›ç«¯å£å·å¯ä»¥è¢«è®¿é—®ï¼Œæ¯”å¦‚å®‰å…¨ç»„è¦æ·»åŠ ä¸Š80ç«¯å£å’Œ443ç«¯å£ï¼Œå› ä¸ºhttpè¯·æ±‚é»˜è®¤æ˜¯80ç«¯å£ï¼Œhttpsè¯·æ±‚é»˜è®¤æ˜¯443ç«¯å£ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ·»åŠ ä¸Šè¿™ä¸¤ä¸ªç«¯å£ï¼Œè¿™æ ·æˆ‘ä»¬çš„æœåŠ¡å™¨æ‰èƒ½è¢«å¤–ç½‘è®¿é—®ï¼Œåˆæ¯”å¦‚MySQLæ•°æ®åº“é»˜è®¤çš„ç«¯å£æ˜¯3306ç«¯å£ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦æ·»åŠ ä¸Šè¿™ä¸ªç«¯å£ï¼Œå¦åˆ™æˆ‘ä»¬çš„æ•°æ®åº“ä¹Ÿä¸èƒ½è¢«å¤–ç½‘è®¿é—®
  * å¯†é’¥å¯¹æˆ–å¯†ç ï¼šé€‰æ‹©è‡ªå®šä¹‰å¯†ç ï¼Œè¾“å…¥å¯†ç ï¼Œå°±æ˜¯rootè¿™ä¸ªç”¨æˆ·çš„å¯†ç ï¼Œå°†æ¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªè´¦å·å’Œå¯†ç æ¥è®¿é—®æœåŠ¡å™¨
  
#### 2ã€é…ç½®äº‘æœåŠ¡å™¨ï¼Œç»™æœåŠ¡å™¨å®‰è£…nginx

###### 2.1 å…ˆæŠŠæˆ‘ä»¬çš„ç”µè„‘è¿æ¥åˆ°æœåŠ¡å™¨
* é˜¿é‡Œäº‘çš„å®ä¾‹ï¼ˆå³æœåŠ¡å™¨ï¼‰è¯¦æƒ…é¡µé¢é‡Œæœ‰ä¸ªâ€œè¿œç¨‹è¿æ¥â€ï¼Œç‚¹å‡»å®ƒå³å¯è¿æ¥ä¸ŠæœåŠ¡å™¨

###### 2.2 åœ¨é˜¿é‡Œäº‘ç»™æˆ‘ä»¬æ‰“å¼€çš„ç»ˆç«¯é‡Œç»™æœåŠ¡å™¨å®‰è£…nginx
æˆ‘ä»¬è¦ç”¨nginxåœ¨ç›‘å¬æ¥è‡ªå®¢æˆ·ç«¯çš„è®¿é—®ï¼Œå¹¶å†ç»™å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªé¡µé¢ï¼Œæ¯”å¦‚é»˜è®¤æƒ…å†µä¸‹nginxåœ¨ç›‘å¬80ç«¯å£ï¼Œå¹¶ç»™å®¢æˆ·ç«¯è¿”å›â€œ/usr/share/nginx/htmlâ€å¯¹åº”çš„é¡µé¢ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä¼šçœ‹åˆ°ã€‚è€Œåé¢æˆ‘ä»¬åœ¨éƒ¨ç½²nodeé¡¹ç›®æ—¶å°±å¯ä»¥ä¸å®‰è£…nginxï¼Œå› ä¸ºæˆ‘ä»¬ä¼šå®‰è£…nodejsï¼Œnodejsæœ¬èº«å°±å¯ä»¥ç›‘å¬ç«¯å£ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦é¢å¤–ç”¨nginxæ¥ç›‘å¬ç«¯å£äº†
* æ‰§è¡Œâ€œdnf install nginxâ€å‘½ä»¤å®‰è£…nginx
* å¯ä»¥é€šè¿‡â€œnginx -vâ€æˆ–â€œnginx --versionâ€æ¥æŸ¥çœ‹æ‰€å®‰è£…nginxçš„ç‰ˆæœ¬

###### 2.3 å¯åŠ¨nginx
* æ‰§è¡Œâ€œsystemctl start nginxâ€å‘½ä»¤æ¥å¯åŠ¨nginx
* ç„¶åæˆ‘ä»¬å¯ä»¥æ‰§è¡Œâ€systemctl status nginxâ€œå‘½ä»¤æ¥æŸ¥çœ‹nginxçš„è¿è¡ŒçŠ¶æ€æ˜¯å¦æˆåŠŸå¯åŠ¨ï¼Œå¦‚æœçœ‹åˆ°active(running)å°±ä»£è¡¨å¯åŠ¨æˆåŠŸäº†
* æ­¤å¤–æˆ‘ä»¬è¿˜å¯ä»¥æ‰§è¡Œâ€systemctl enable nginxâ€œå‘½ä»¤æ¥è®©æœåŠ¡å™¨é‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨nginxï¼Œå…å¾—æ¯æ¬¡é‡å¯ç³»ç»Ÿè¿˜å¾—æˆ‘ä»¬ä¸»åŠ¨æ‰§è¡Œå‘½ä»¤æ¥å¯åŠ¨nginx

###### 2.4 é…ç½®nginx
è¿™é‡Œä¸»è¦é…ç½®nginxçš„ç”¨æˆ·å’Œé»˜è®¤è®¿é—®ç›®å½•
* æ‰¾åˆ°etcæ–‡ä»¶å¤¹(å’Œrootæ–‡ä»¶å¤¹å¹³çº§çš„)ä¸‹çš„nginxæ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°nginx.configæ–‡ä»¶ï¼Œæ‰“å¼€å®ƒ
* æŠŠæ–‡ä»¶é‡Œçš„â€œuser nginx;â€æ”¹æˆâ€œuser root;â€è®©nginxå…·å¤‡rootæƒé™ï¼Œåˆ°æ—¶å€™nginxè®¿é—®æˆ‘ä»¬æœåŠ¡å™¨ä¸Šçš„èµ„æºæ—¶å°±æ˜¯ä»¥rootæƒé™è®¿é—®äº†
* æ‰¾åˆ°ä¸‹é¢çš„serverï¼Œå¯è§nginxé»˜è®¤ç›‘å¬çš„æ˜¯80ç«¯å£ï¼Œå½“nginxç›‘å¬åˆ°80ç«¯å£æœ‰è®¿é—®æ—¶ä¼šæŠŠrootå¯¹åº”çš„é¡µé¢ç»™è¿”å›æ¥â€”â€”å³â€œ/usr/share/nginx/htmlâ€è¿™ä¸ªé¡µé¢ã€è¿™ä¸ªé¡µé¢æ˜¯nginxåœ¨usrç›®å½•ä¸‹å†…ç½®çš„ä¸€ä¸ªé¡µé¢ï¼Œæˆ‘ä»¬å½“ç„¶ä¸æ˜¯ç»™ç”¨æˆ·è¿”å›è¿™ä¸ªé¡µé¢ï¼Œæ‰€ä»¥è¦æŠŠå®ƒæ³¨é‡Šæ‰ï¼Œç„¶åå»locationé‚£é‡Œé…ç½®é’ˆå¯¹æ¯ä¸ªé¡¹ç›®æˆ‘ä»¬æƒ³è¿”å›ç»™ç”¨æˆ·çš„ç•Œé¢å³å¯
```é»˜è®¤é…ç½®
server {
        listen       80;
        listen       [::]:80;
        server_name  _;
        root         /usr/share/nginx/html;

        # Load configuration files for the default server block.
        include /etc/nginx/default.d/*.conf;

        error_page 404 /404.html;
        location = /404.html {
        }

        error_page 500 502 503 504 /50x.html;
        location = /50x.html {
        }
    }
```
```ä¿®æ”¹åçš„é…ç½®
server {
    listen       80 default_server;
    listen       [::]:80 default_server;
    server_name  _;
    # è¿™ä¸ªæ˜¯ç”¨æˆ·è®¿é—®æ ¹è·¯å¾„ã€å³ç”¨æˆ·è®¿é—® http://118.25.70.197 æ—¶è¿”å›ç»™ç”¨æˆ·çš„é¡µé¢
    # root         /usr/share/nginx/html;

    # Load configuration files for the default server block.
    include /etc/nginx/default.d/*.conf;

    # è¿™é‡Œè·Ÿä¸Šé¢ root çš„å†™æ³•ä¸åŒï¼Œä½†ä½œç”¨ç›¸åŒï¼Œè¿™é‡Œæˆ‘ä»¬è®¾è®¡ç”¨æˆ·è®¿é—® http://118.25.70.197 æ—¶ï¼Œæˆ‘ä»¬ç»™ç”¨æˆ·è¿”å›æˆ‘ä»¬ä¸»è¦çš„é¡¹ç›® fun-trip
    location / {
        root /root/fun-trip/;
        index index.html;
    }

    # é¡¹ç›®1: fun-trip - é€šè¿‡ http://118.25.70.197/fun-trip è®¿é—®
    location /fun-trip {
        # alias çš„å«ä¹‰æ˜¯ï¼šå½“ç”¨æˆ·è®¿é—® http://118.25.70.197/fun-trip æ—¶ï¼Œnginx ä¼šå…ˆæ‰¾åˆ° /root/fun-trip/ ç›®å½•
        alias /root/fun-trip/;
        # index çš„å«ä¹‰æ˜¯ï¼šç„¶å nginx ä¼šæ‰¾åˆ°è¯¥ç›®å½•ä¸‹çš„ index.html é¡µé¢è¿”å›ç»™ç”¨æˆ·
        index index.html;
        # try_files æ˜¯ä¸ºäº†ç¡®ä¿å‰ç«¯è·¯ç”±èƒ½æ­£å¸¸å·¥ä½œ
        try_files $uri $uri/ /fun-trip/index.html;
    }

    # é¡¹ç›®2: fun-car - é€šè¿‡ http://118.25.70.197/fun-car è®¿é—®
    location /fun-car {
        alias /root/fun-car/;
        index index.html;
        try_files $uri $uri/ /fun-car/index.html;
    }

    error_page 404 /404.html;
        location = /40x.html {
    }

    error_page 500 502 503 504 /50x.html;
        location = /50x.html {
    }
}
```
* è®°å¾—cmd + sä¿å­˜æ›´æ”¹
* ä¿®æ”¹äº†nginxçš„é…ç½®åï¼Œéœ€è¦é‡å¯ä¸€ä¸‹nginxï¼Œæ‰§è¡Œâ€œsystemctl restart nginxâ€å‘½ä»¤æ¥é‡å¯nginx


#### 3ã€æŠŠæˆ‘ä»¬çš„é¡¹ç›®éƒ¨ç½²åˆ°æœåŠ¡å™¨

###### 3.1 æ‰‹åŠ¨éƒ¨ç½²
* VSCodeé‡Œå®‰è£…â€Remote -SSHâ€œæ’ä»¶ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥åœ¨é˜¿é‡Œäº‘çš„é‚£ä¸ªè¿æ¥è¿œç¨‹é‡Œåšï¼Œé‚£ä¸ªé‡Œé¢ä¹Ÿèƒ½æ‰“å¼€æ–‡ä»¶å¤¹ï¼‰
* å·¦ä¾§ä¾§è¾¹æ é€‰ä¸­è¯¥æ’ä»¶
* SSHå³ä¾§é€‰æ‹©æ–°å»ºè¿œç¨‹
* åœ¨å¼¹çª—é‡Œè¾“å…¥â€œssh root@æœåŠ¡å™¨çš„å…¬ç½‘IPâ€ï¼Œå›è½¦æ¥æ–°å»ºè¿œç¨‹
* é€‰æ‹©â€œ/User/xxx/.ssh/configâ€é…ç½®æ–‡ä»¶
* å·¦ä¾§SSHä¸‹å°±æœ‰æˆ‘ä»¬çš„è¿œç¨‹æœåŠ¡å™¨äº†
* é€‰ä¸­è¿œç¨‹æœåŠ¡å™¨ï¼Œå³é”®è¿æ¥ï¼Œè¾“å…¥rootç”¨æˆ·çš„å¯†ç å³å¯å‘èµ·è¿æ¥
* è¿æ¥æˆåŠŸåï¼Œé€‰ä¸­å·¦ä¾§ä¾§è¾¹æ çš„æ–‡ä»¶ï¼Œå‘ç°é‡Œé¢ä¼šæç¤ºâ€œå·²è¿æ¥åˆ°è¿œç¨‹â€
* ç„¶åæˆ‘ä»¬é€‰æ‹©â€œæ‰“å¼€æ–‡ä»¶å¤¹â€æ¥æ‰“å¼€è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å¤¹ï¼Œé»˜è®¤ä¼šå¸®æˆ‘ä»¬æ‰“å¼€è¿œç¨‹æœåŠ¡å™¨çš„rootæ–‡ä»¶å¤¹ï¼Œè¿™æ ·è¿œç¨‹æœåŠ¡å™¨çš„rootæ–‡ä»¶å¤¹å°±å±•ç¤ºåœ¨VSCodeé‡Œäº†
* ç›´æ¥æŠŠæˆ‘ä»¬çš„é¡¹ç›®æ‹–è¿›rootæ–‡ä»¶å¤¹é‡Œï¼Œè¿™æ ·è¿œç¨‹æœåŠ¡å™¨ä¸Šå°±æœ‰æˆ‘ä»¬çš„é¡¹ç›®äº†
* å»nginx.configæ–‡ä»¶é‡ŒæŸ¥çœ‹ä¸‹æˆ‘ä»¬é…ç½®çš„è®¿é—®è·¯å¾„å¯¹ä¸å¯¹ï¼Œæ²¡é—®é¢˜çš„è¯å»è¯·æ±‚é¡µé¢è¯•è¯•å§

###### 3.2 Jenkinsè‡ªåŠ¨éƒ¨ç½²

###### 3.2.1 åœ¨é˜¿é‡Œäº‘ç»™æˆ‘ä»¬æ‰“å¼€çš„ç»ˆç«¯é‡Œç»™æœåŠ¡å™¨å®‰è£…Javaç¯å¢ƒ

Jenkinsæœ¬èº«æ˜¯ä¾èµ–Javaçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…Javaç¯å¢ƒï¼š

* æ‰§è¡Œâ€œdnf search javaâ€å‘½ä»¤æ¥æŸ¥çœ‹æ”¯æŒçš„javaç‰ˆæœ¬ï¼Œé€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬æ¯”å¦‚â€œjava-21-openjdkâ€
* æ‰§è¡Œâ€œdnf install java-21-openjdkâ€å‘½ä»¤å®‰è£…java
* å¯ä»¥é€šè¿‡â€œjava --versionâ€æ¥æŸ¥çœ‹æ‰€å®‰è£…javaçš„ç‰ˆæœ¬

###### 3.2.2 åœ¨é˜¿é‡Œäº‘ç»™æˆ‘ä»¬æ‰“å¼€çš„ç»ˆç«¯é‡Œç»™æœåŠ¡å™¨å®‰è£…JenkinsåŠå…¶æ’ä»¶

å› ä¸ºJenkinsæœ¬èº«æ˜¯æ²¡æœ‰åœ¨dnfçš„è½¯ä»¶ä»“åº“åŒ…ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡Jenkinsä»“åº“æ¥å®‰è£…ï¼š

* wgetæ˜¯Linuxä¸­ä¸‹è½½æ–‡ä»¶çš„ä¸€ä¸ªå·¥å…·ï¼Œ-Oè¡¨ç¤ºè¾“å‡ºåˆ°æŸä¸ªæ–‡ä»¶å¤¹å¹¶ä¸”å‘½åä¸ºä»€ä¹ˆæ–‡ä»¶
* rpmï¼šæ˜¯Linuxä¸‹ä¸€ä¸ªè½¯ä»¶åŒ…ç®¡ç†å™¨

```shell
# æŠŠJenkinsä»“åº“æ–‡ä»¶å…ˆä¸‹è½½åˆ°æœåŠ¡å™¨çš„æŸä¸ªç›®å½•ä¸‹
wget â€“O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo

# å¯¼å…¥GPGå¯†é’¥ä»¥ç¡®ä¿å®‰è£…çš„jenkinsè½¯ä»¶åˆæ³•
sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key
# æˆ–è€…
rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key
```

ç›´æ¥æ‰¾åˆ°â€œ/etc/yum.repos.d/jenkins.repoâ€è¿™ä¸ªä»“åº“æ–‡ä»¶æˆ–é€šè¿‡â€œvim /etc/yum.repos.d/jenkins.repoâ€æŠŠä¸‹é¢çš„å†…å®¹å¤åˆ¶è¿›ä»“åº“æ–‡ä»¶é‡Œ

```
[jenkins]

name=Jenkins-stable

baseurl=http://pkg.jenkins.io/redhat

gpgcheck=1
```

å®‰è£…Jenkins

```shell
dnf install jenkins # --nogpgcheck(å¯ä»¥ä¸åŠ )
```

å¯åŠ¨Jenkinsçš„æœåŠ¡ï¼š

```shell
systemctl start jenkins
systemctl status jenkins
systemctl enable jenkins
```

å› ä¸ºJenkinsé»˜è®¤ä½¿ç”¨æœåŠ¡å™¨çš„8080ç«¯å£æä¾›æœåŠ¡ï¼Œæ‰€ä»¥éœ€è¦åœ¨äº‘æœåŠ¡å™¨çš„ç½‘ç»œå’Œå®‰å…¨ç»„é‡Œæ·»åŠ 8080ç«¯å£ã€‚æ·»åŠ å¥½ç«¯å£åï¼Œæ­¤æ—¶å»æµè§ˆå™¨é‡Œé€šè¿‡äº‘æœåŠ¡å™¨çš„ipåœ°å€åŠ ç«¯å£å·å°±èƒ½è®¿é—®åˆ°jenkinsçš„æœåŠ¡äº†ï¼Œæ¯”å¦‚ï¼šhttp://118.25.70.197:8080

è®¿é—®åœ°å€åï¼ŒJenkinsä¼šæç¤ºæˆ‘ä»¬ç™»å½•ï¼Œå¹¶ä¸”å‘Šè¯‰æˆ‘ä»¬adminç”¨æˆ·çš„åˆå§‹å¯†ç å­˜å‚¨åœ¨äº‘æœåŠ¡å™¨ä¸Šçš„å“ªä¸ªæ–‡ä»¶é‡Œï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶æ‹¿åˆ°å¯†ç ï¼Œæˆ–è€…é€šè¿‡ä¸‹é¢çš„catå‘½ä»¤ç›´æ¥è¯»å–æ–‡ä»¶æ‹¿åˆ°å¯†ç ï¼Œç„¶åç™»å½•è¿›å»ï¼š

```shell
cat /var/lib/jenkins/secrets/initialAdminPassword # è¯»å–æ–‡ä»¶é‡Œçš„å¯†ç 
```

ç™»å½•æˆåŠŸåé€‰æ‹©â€œå®‰è£…æ¨èçš„æ’ä»¶â€ï¼Œè¿™æ ·ä¸€æ¥jenkinsåœ¨æ‰§è¡Œå¤§å¤šæ•°æ“ä½œæ—¶æ‰€éœ€è¦çš„æ’ä»¶å°±è¢«å®‰è£…å¥½äº†

å½“ç„¶ä¹Ÿæœ‰ä¸€äº›æ’ä»¶éœ€è¦æˆ‘ä»¬åç»­æ‰‹åŠ¨å®‰è£…â€”â€”æ¯”å¦‚nodeï¼Œä¸€ä¼šè¿›å»ä¹‹åè®°å¾—æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹nodeæ’ä»¶ï¼šã€ç®¡ç†jenkinsã€‘-ã€æ’ä»¶ã€‘-ã€å¯ç”¨çš„æ’ä»¶ã€‘-ã€æœç´¢nodeã€‘-ã€å®‰è£…nodejsã€‘ã€‚å®‰è£…å¥½nodejsæ’ä»¶ä¹‹åï¼Œè¿˜å¾—å»ã€å…¨å±€å·¥å…·é…ç½®ã€‘-ã€NodeJS å®‰è£…ã€‘-ã€æ–°å¢NodeJSã€‘-ã€åˆ«åéšä¾¿å–ä¸€ä¸ªæ¯”å¦‚å«nodeã€‘-ã€è¦å®‰è£…çš„nodeç‰ˆæœ¬å·æœ€å¥½è·Ÿä½ ç”µè„‘ä¸Šå¼€å‘ç”¨çš„é‚£ä¸ªç‰ˆæœ¬å·ä¸€è‡´ï¼Œä¸ç„¶å¯èƒ½å› ä¸ºapiä¸ä¸€è‡´ï¼Œæœ¬åœ°ä»£ç èƒ½è·‘æœåŠ¡å™¨ä¸Šå°±ä¸èƒ½è·‘äº†ã€‘-ã€å…¶ä»–çš„ä¸ç”¨ç®¡ã€‘-ã€ä¿å­˜ã€‘ï¼ˆè¿™é‡Œå…¶å®æ˜¯è®©jenkins ç»™æœåŠ¡å™¨å®‰è£…ä¸€ä¸ªnodeï¼Œå¦‚æœæˆ‘ä»¬æœåŠ¡å™¨ä¸Šå·²ç»å®‰è£…ç›¸åŒç‰ˆæœ¬çš„è¯å°±ä¸ç”¨å®‰è£…äº†ï¼‰

æ’ä»¶å®‰è£…æˆåŠŸåï¼Œjenkinsä¼šæç¤ºæˆ‘ä»¬åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·ä»¥ä¾¿åç»­ä½¿ç”¨ï¼Œå› ä¸ºåˆšæ‰é»˜è®¤çš„adminç”¨æˆ·å¯†ç å¤ªéš¾è®°äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ç”¨è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·æ¥ä½¿ç”¨jenkinsï¼ŒæŒ‰æç¤ºåˆ›å»ºç”¨æˆ·å¹¶ç™»å½•è¿›å»å³å¯

###### 3.2.3 åœ¨é˜¿é‡Œäº‘ç»™æˆ‘ä»¬æ‰“å¼€çš„ç»ˆç«¯é‡Œé…ç½®jenkins

æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è®©jenkinså…·å¤‡rootæƒé™ï¼Œåˆ°æ—¶å€™jenkinsè®¿é—®æˆ‘ä»¬æœåŠ¡å™¨ä¸Šçš„èµ„æºæ—¶å°±æ˜¯ä»¥rootæƒé™è®¿é—®äº†ï¼Œæ‰§è¡Œå®Œåè®°å¾—é‡å¯ä¸€ä¸‹jenkins

```shell
sudo usermod -a -G root jenkins
systemctl restart jenkins
```

å¦‚æœæ‰§è¡Œäº†ä¸Šé¢çš„å‘½ä»¤ï¼Œåœ¨æ‰“åŒ…æ—¶è¿˜æ˜¯é‡åˆ°æ— æ³•åˆ é™¤åŸé¡¹ç›®çš„æƒé™é—®é¢˜ï¼Œå¯ä»¥å†æ‰§è¡Œä¸‹ä¸‹é¢çš„å‘½ä»¤ï¼Œæ‰§è¡Œå®Œåè®°å¾—é‡å¯ä¸€ä¸‹jenkins

```shell
sudo chown -R jenkins /root/fun-trip #æ›¿æ¢æˆé¡¹ç›®çš„çœŸå®ç›®å½•
systemctl restart jenkins
```

###### 3.2.4 åœ¨é˜¿é‡Œäº‘ç»™æˆ‘ä»¬æ‰“å¼€çš„ç»ˆç«¯é‡Œç»™æœåŠ¡å™¨å®‰è£…git
å› ä¸ºå°†æ¥jenkinsè¦é€šè¿‡gitæ¥æ‹‰å–æˆ‘ä»¬æäº¤çš„ä»£ç åˆ°æœåŠ¡å™¨ä¸Š
* æ‰§è¡Œâ€œdnf install gitâ€å‘½ä»¤å®‰è£…git
* å¯ä»¥é€šè¿‡â€œgit -vâ€æˆ–â€œgit --versionâ€æ¥æŸ¥çœ‹æ‰€å®‰è£…nginxçš„ç‰ˆæœ¬

###### 3.2.5 æ–°å»ºæ‰“åŒ…ä»»åŠ¡ã€å®Œæˆè‡ªåŠ¨æ‰“åŒ…ä¸éƒ¨ç½²

* `æ–°å»ºä»»åŠ¡`

æ–°å»º item å’Œ create a job æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æ–°å»ºä¸€ä¸ªä»»åŠ¡

![alt text](./jenkins-img/1.png)

è¾“å…¥ä»»åŠ¡åã€é€‰æ‹©è‡ªå®šä¹‰æ‰“åŒ…æµç¨‹ã€ç‚¹å‡»ç¡®å®š

![alt text](./jenkins-img/2.png)

* `General -> å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹ -> æ·»åŠ å‚æ•°`

![alt text](./jenkins-img/3.png)

![alt text](./jenkins-img/4.png)

![alt text](./jenkins-img/4_1.png)

* `æºç ç®¡ç†`

å…ˆåˆ›å»ºä¸€ä¸ªå‡­æ®ï¼šã€ç®¡ç†jenkinsã€‘-ã€å‡­æ®ç®¡ç†ã€‘-ã€Systemã€‘-ã€å…¨å±€å‡­æ®ã€‘-ã€æ·»åŠ å‡­æ®ã€‘- è¾“å…¥ä½ gitä»“åº“çš„è´¦å·å’Œå¯†ç 

![alt text](./jenkins-img/5.png)

* `æ„å»ºç¯å¢ƒ`

![alt text](./jenkins-img/6.png)

* `Build Steps`

![alt text](./jenkins-img/7.png)
![alt text](./jenkins-img/8.png)

æ‰“åŒ…è„šæœ¬
```shell
pwd # æŸ¥çœ‹å½“å‰æ‰€åœ¨ç›®å½•ï¼Œç¡®ä¿æ‰“åŒ…çš„é¡¹ç›®æ²¡é”™

node -v # æŸ¥çœ‹ä¸€ä¸‹æœåŠ¡å™¨nodeç‰ˆæœ¬ï¼Œç¡®è®¤æ‰“åŒ…ç¯å¢ƒ
npm -v # æŸ¥çœ‹ä¸€ä¸‹æœåŠ¡å™¨npmç‰ˆæœ¬ï¼Œç¡®è®¤æ‰“åŒ…ç¯å¢ƒ

npm install # å®‰è£…ä¾èµ–
npm run build # æ‰“åŒ…

echo 'ğŸš€æ‰“åŒ…æˆåŠŸğŸš€'

ls # æŸ¥çœ‹å½“å‰ç›®å½•æœ‰æ²¡æœ‰å¤šå‡ºæ¥æ‰“åŒ…äº§ç‰©çš„ç›®å½•

rm -rf /root/$ProjectName/* # ç§»é™¤ä¸Šä¸€ä¸ªç‰ˆæœ¬ /root/fun-trip/ æ–‡ä»¶å¤¹é‡Œæ‰€æœ‰çš„å†…å®¹
cp -rf ./dist/* /root/$ProjectName/ # æŠŠæœ€æ–°æ‰“åŒ…çš„ dist æ–‡ä»¶å¤¹é‡Œçš„å†…å®¹ç§»åŠ¨åˆ° /root/fun-trip/ æ–‡ä»¶å¤¹
```